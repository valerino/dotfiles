# buildenv customization for AOSP
# tested on ubuntu
# assumes repo installed in ~/bin
# ffmpeg-static built from https://github.com/zimbatm/ffmpeg-static

# use preexisting bashrc as base
source ~/.bashrc

# aosp root checked out here with repo
AOSP_ROOT=~/aosp

# the target device for AOSP
#AOSP_DEVICE_CONFIG=aosp_angler-userdebug
#AOSP_DEVICE_CONFIG=aosp_x86-eng
AOSP_DEVICE_CONFIG=aosp_arm64-eng

export PATH=~/bin:~/repos/ffmpeg-static/bin:$PATH
#export LC_ALL=en_US.UTF-8
export LC_ALL=C

cd $AOSP_ROOT
source build/envsetup.sh
lunch $AOSP_DEVICE_CONFIG

#export PATH=~/system:/system/bin:/system/sbin:$PATH
export ANDROID_HOST_OUT=~/android_src/out/host/linux-x86
export ANDROID_TARGET_OUT=~/android_src/out/target/product/generic_x86

# for afl
#export AFL_SKIP_CPUFREQ=1
#unset ASAN_OPTIONS
